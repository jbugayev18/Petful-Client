{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jbuga\\\\Petful\\\\DSA-Petful\\\\petful-client-template\\\\src\\\\routes\\\\Adopt.js\";\nimport React, { Component } from \"react\";\nimport config from \"../config\";\nimport PetService from \"../services/pet-service\";\nimport PeopleService from \"../services/person-service\";\nimport \"./Adopt.css\";\nexport class Adopt extends Component {\n  constructor() {\n    super();\n\n    this.petCountdown = () => {\n      let countdown = setInterval(() => {\n        if (this.state.people.length < 2) {\n          this.addToQueue();\n          this.setState({\n            isHidden: false\n          });\n          return clearInterval(countdown);\n        }\n\n        fetch(`${config.REACT_APP_API_BASE}/people`, {\n          method: \"DELETE\",\n          header: {\n            \"content-type\": \"application/json\"\n          }\n        }).then(() => this.fetchData());\n        this.adopted();\n      }, 4000);\n    };\n\n    this.addToQueue = () => {\n      let peopleNames = [\"Sam Francisco\", \"Patricio Lombard\", \"Naomi Ger\", \"Diorian Grey\", \"Law Gaurd\", \"Kristina Si\"];\n      var addPeople = setInterval(() => {\n        if (this.state.people.length > 4) {\n          return clearInterval(addPeople);\n        }\n\n        let index = Math.floor(Math.random() * peopleNames.length);\n        let person = peopleNames[index];\n        fetch(`${config.REACT_APP_API_BASE}/people`, {\n          method: \"POST\",\n          headers: {\n            \"content-type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            person\n          })\n        }).then(res => res.json()).then(() => this.fetchData());\n      }, 4000);\n    };\n\n    this.fetchData = () => {\n      fetch(`${config.REACT_APP_API_BASE}/pets`).then(res => res.json()).then(res => this.setState({\n        cats: [res.cat],\n        dogs: [res.dog],\n        pets: res,\n        OK: true\n      }));\n      fetch(`${config.REACT_APP_API_BASE}/people`).then(res => res.json()).then(res => {\n        this.setState({\n          people: res.people\n        });\n      });\n    };\n\n    this.adopted = (petId = null) => {\n      let counter = petId ? petId : this.state.people.length;\n\n      if (counter === 0) {\n        return;\n      }\n\n      if (counter % 2 === 0) {\n        fetch(`${config.REACT_APP_API_BASE}/pets`, {\n          method: \"DELETE\",\n          headers: {\n            \"content-type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            type: \"cats\"\n          })\n        }).then(() => this.fetchData());\n      } else {\n        fetch(`${config.REACT_APP_API_BASE}/pets`, {\n          method: \"DELETE\",\n          headers: {\n            \"content-type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            type: \"dogs\"\n          })\n        }).then(() => this.fetchData());\n      }\n    };\n\n    this.onSubmit = event => {\n      event.preventDefault();\n      let person = this.state.fullName;\n      this.setState({\n        currentUser: person\n      });\n      fetch(`${config.REACT_APP_API_BASE}/people`, {\n        method: \"POST\",\n        headers: {\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          person\n        })\n      }).then(res => res.json()).then(resJson => {\n        this.setState({\n          people: [...resJson.people]\n        });\n      }).then(() => this.fetchData());\n      this.petCountdown();\n    };\n\n    this.handleAdoptClick = event => {\n      event.preventDefault();\n      fetch(`${config.REACT_APP_API_BASE}/people`, {\n        method: \"DELETE\",\n        header: {\n          \"content-type\": \"application/json\"\n        }\n      }).then(() => this.fetchData());\n      this.adopted(event.target.value);\n      alert(\"You adopted a pet!\");\n      this.setState({\n        isHidden: true\n      });\n    };\n\n    this.state = {\n      cats: [],\n      dogs: [],\n      people: [],\n      pets: {},\n      OK: false,\n      fullName: \"\",\n      currentUser: \"\",\n      isHidden: true\n    };\n  }\n\n  componentDidMount() {\n    PetService.getAllPets().then(pets => {\n      this.setState({\n        cats: [pets.cat],\n        dogs: [pets.dog]\n      });\n    });\n    PeopleService.getAllPeople().then(people => {\n      this.setState({\n        people: people.people\n      });\n    }).catch(e => console.error(e));\n  } // }\n\n\n  render() {\n    let hiddenClass = this.state.isHidden ? \"hiddenClass\" : \"\";\n    let cats = this.cats ? this.state.cats : [];\n    let catCard = cats.map(cat => {\n      return React.createElement(\"div\", {\n        key: \"1\",\n        className: \"landing-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: cat,\n        alt: \"Landing Cat\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"Name: \", cat.name), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Gender: \", cat.gender), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"Age: \", cat.age), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"Breed: \", cat.breed));\n    });\n    let dogs = this.state.dogs ? this.state.dogs : [];\n    let dogCard = dogs.map(dog => {\n      return React.createElement(\"div\", {\n        key: \"1\",\n        className: \"landing-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: dog.imageURL,\n        alt: \"Landing Dog\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }), React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"Name: \", dog.name), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \"Gender: \", dog.gender), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"Age: \", dog.age), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \"Breed: \", dog.breed));\n    });\n    let people = this.state.people ? this.state.people : [];\n    let nextInLine = people.map((people, i) => {\n      return React.createElement(\"div\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        className: \"people-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, people));\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"Let's See Who Is In Line?\"), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"Cats\"), React.createElement(\"button\", {\n      className: `adoptCat-button ${hiddenClass}`,\n      onClick: this.handleAdoptClick,\n      value: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Adopt This Cat!\", \" \"), catCard), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, \"Dogs\"), React.createElement(\"button\", {\n      className: `adoptDog-button ${hiddenClass}`,\n      onClick: this.handleAdoptClick,\n      value: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"Adopt This Dog!\", \" \"), dogCard, React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, \"Let's See Who Is In Line To Adopt! \"), React.createElement(\"ol\", {\n      className: \"landing-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, nextInLine)), React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \"Get in Line!\"), React.createElement(\"div\", {\n      className: \"landing-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"full-name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, \"Enter Your Name\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      onChange: event => this.setState({\n        fullName: event.currentTarget.value\n      }),\n      type: \"text\",\n      id: \"full-name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, \"Join Queue\"))));\n  }\n\n}\nexport default Adopt;","map":{"version":3,"sources":["C:/Users/jbuga/Petful/DSA-Petful/petful-client-template/src/routes/Adopt.js"],"names":["React","Component","config","PetService","PeopleService","Adopt","constructor","petCountdown","countdown","setInterval","state","people","length","addToQueue","setState","isHidden","clearInterval","fetch","REACT_APP_API_BASE","method","header","then","fetchData","adopted","peopleNames","addPeople","index","Math","floor","random","person","headers","body","JSON","stringify","res","json","cats","cat","dogs","dog","pets","OK","petId","counter","type","onSubmit","event","preventDefault","fullName","currentUser","resJson","handleAdoptClick","target","value","alert","componentDidMount","getAllPets","getAllPeople","catch","e","console","error","render","hiddenClass","catCard","map","name","gender","age","breed","dogCard","imageURL","nextInLine","i","currentTarget"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport config from \"../config\";\r\nimport PetService from \"../services/pet-service\";\r\nimport PeopleService from \"../services/person-service\";\r\nimport \"./Adopt.css\"\r\n\r\nexport class Adopt extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      cats: [],\r\n      dogs: [],\r\n      people: [],\r\n      pets: {},\r\n      OK: false,\r\n      fullName: \"\",\r\n      currentUser: \"\",\r\n      isHidden: true,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    PetService.getAllPets().then((pets) => {\r\n      this.setState({\r\n        cats: [pets.cat],\r\n        dogs: [pets.dog],\r\n      });\r\n    });\r\n    PeopleService.getAllPeople()\r\n      .then((people) => {\r\n        this.setState({ people: people.people });\r\n      })\r\n      .catch((e) => console.error(e));\r\n  }\r\n  // }\r\n\r\n  petCountdown = () => {\r\n    let countdown = setInterval(() => {\r\n      if (this.state.people.length < 2) {\r\n        this.addToQueue();\r\n        this.setState({\r\n          isHidden: false,\r\n        });\r\n        return clearInterval(countdown);\r\n      }\r\n      fetch(`${config.REACT_APP_API_BASE}/people`, {\r\n        method: \"DELETE\",\r\n        header: {\r\n          \"content-type\": \"application/json\",\r\n        },\r\n      }).then(() => this.fetchData());\r\n      this.adopted();\r\n    }, 4000);\r\n  };\r\n\r\n  addToQueue = () => {\r\n    let peopleNames = [\r\n      \"Sam Francisco\",\r\n      \"Patricio Lombard\",\r\n      \"Naomi Ger\",\r\n      \"Diorian Grey\",\r\n      \"Law Gaurd\",\r\n      \"Kristina Si\",\r\n    ];\r\n\r\n    var addPeople = setInterval(() => {\r\n      if (this.state.people.length > 4) {\r\n        return clearInterval(addPeople);\r\n      }\r\n\r\n      let index = Math.floor(Math.random() * peopleNames.length);\r\n      let person = peopleNames[index];\r\n\r\n      fetch(`${config.REACT_APP_API_BASE}/people`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"content-type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ person }),\r\n      })\r\n        .then((res) => res.json())\r\n        .then(() => this.fetchData());\r\n    }, 4000);\r\n  };\r\n\r\n  fetchData = () => {\r\n    fetch(`${config.REACT_APP_API_BASE}/pets`)\r\n      .then((res) => res.json())\r\n      .then((res) =>\r\n        this.setState({\r\n          cats: [res.cat],\r\n          dogs: [res.dog],\r\n          pets: res,\r\n          OK: true,\r\n        })\r\n      );\r\n    fetch(`${config.REACT_APP_API_BASE}/people`)\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        this.setState({ people: res.people });\r\n      });\r\n  };\r\n\r\n  adopted = (petId = null) => {\r\n    let counter = petId ? petId : this.state.people.length;\r\n    if (counter === 0) {\r\n      return;\r\n    }\r\n    if (counter % 2 === 0) {\r\n      fetch(`${config.REACT_APP_API_BASE}/pets`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          \"content-type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ type: \"cats\" }),\r\n      }).then(() => this.fetchData());\r\n    } else {\r\n      fetch(`${config.REACT_APP_API_BASE}/pets`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          \"content-type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ type: \"dogs\" }),\r\n      }).then(() => this.fetchData());\r\n    }\r\n  };\r\n\r\n  onSubmit = (event) => {\r\n    event.preventDefault();\r\n    let person = this.state.fullName;\r\n    this.setState({ currentUser: person });\r\n    fetch(`${config.REACT_APP_API_BASE}/people`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ person }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((resJson) => {\r\n        this.setState({\r\n          people: [...resJson.people],\r\n        });\r\n      })\r\n      .then(() => this.fetchData());\r\n    this.petCountdown();\r\n  };\r\n\r\n  handleAdoptClick = (event) => {\r\n    event.preventDefault();\r\n    fetch(`${config.REACT_APP_API_BASE}/people`, {\r\n      method: \"DELETE\",\r\n      header: {\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    }).then(() => this.fetchData());\r\n    this.adopted(event.target.value);\r\n    alert(\"You adopted a pet!\");\r\n    this.setState({\r\n      isHidden: true,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    let hiddenClass = this.state.isHidden ? \"hiddenClass\" : \"\";\r\n    let cats = this.cats ? this.state.cats : [];\r\n    let catCard = cats.map((cat) => {\r\n      return (\r\n        <div key=\"1\" className=\"landing-content\">\r\n          <img src={cat} alt=\"Landing Cat\" />\r\n          <h2>Name: {cat.name}</h2>\r\n          <p>Gender: {cat.gender}</p>\r\n          <p>Age: {cat.age}</p>\r\n          <p>Breed: {cat.breed}</p>\r\n        </div>\r\n      );\r\n    });\r\n    let dogs = this.state.dogs ? this.state.dogs : [];\r\n\r\n    let dogCard = dogs.map((dog) => {\r\n      return (\r\n        <div key=\"1\" className=\"landing-content\">\r\n          <img src={dog.imageURL} alt=\"Landing Dog\" />\r\n          <h2>Name: {dog.name}</h2>\r\n          <p>Gender: {dog.gender}</p>\r\n          <p>Age: {dog.age}</p>\r\n          <p>Breed: {dog.breed}</p>\r\n        </div>\r\n      );\r\n    });\r\n\r\n    let people = this.state.people ? this.state.people : [];\r\n\r\n    let nextInLine = people.map((people, i) => {\r\n      return (\r\n        <div key={i}>\r\n          <li className=\"people-list\">{people}</li>\r\n        </div>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          <h2>Let's See Who Is In Line?</h2>\r\n          <h2>Cats</h2>\r\n          <button\r\n            className={`adoptCat-button ${hiddenClass}`}\r\n            onClick={this.handleAdoptClick}\r\n            value=\"2\"\r\n          >\r\n            Adopt This Cat!{\" \"}\r\n          </button>\r\n          {catCard}\r\n        </div>\r\n        <h2>Dogs</h2>\r\n        <button\r\n          className={`adoptDog-button ${hiddenClass}`}\r\n          onClick={this.handleAdoptClick}\r\n          value=\"1\"\r\n        >\r\n          Adopt This Dog!{\" \"}\r\n        </button>\r\n        {dogCard}\r\n        <section>\r\n          <h2>Let's See Who Is In Line To Adopt! </h2>\r\n          <ol className=\"landing-content\">{nextInLine}</ol>\r\n        </section>\r\n        <form onSubmit={this.onSubmit}>\r\n          <h1>Get in Line!</h1>\r\n          <div className=\"landing-content\">\r\n            <label htmlFor=\"full-name\">Enter Your Name</label>\r\n            <br />\r\n            <input\r\n              onChange={(event) =>\r\n                this.setState({ fullName: event.currentTarget.value })\r\n              }\r\n              type=\"text\"\r\n              id=\"full-name\"\r\n            />\r\n            <br />\r\n            <br />\r\n            <button>Join Queue</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Adopt;\r\n"]},"metadata":{},"sourceType":"module"}